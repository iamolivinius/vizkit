define("ember-vizkit/app",["ember","ember/resolver","ember/load-initializers","exports"],function(t,e,n,i){"use strict";var a=t["default"],r=e["default"],s=n["default"];a.MODEL_FACTORY_INJECTIONS=!0;var o=a.Application.extend({modulePrefix:"ember-vizkit",Resolver:r});s(o,"ember-vizkit"),i["default"]=o}),define("ember-vizkit/components/line-chart",["ember","exports"],function(t,e){"use strict";var n=t["default"];e["default"]=n.Component.extend({chart:null,data:[],dataChanged:function(){this.chart.load({columns:this.data})}.observes("data.[]"),didInsertElement:function(){n.run.later(this,function(){this.chart=c3.generate({bindto:"#line-chart",data:{columns:this.data,type:"spline"},legend:{position:"right"},axis:{x:{label:{text:"Nodes",position:"inner-right"}},y:{label:{text:"Bandwidth",position:"outer-middle"}}},grid:{x:{show:!1},y:{show:!0}},subchart:{show:!1},zoom:{enabled:!0}})},250)}})}),define("ember-vizkit/components/network-graph",["ember","exports"],function(t,e){"use strict";var n=t["default"];e["default"]=n.Component.extend({nodes:[],links:[],zones:[],force:null,svg:null,node:null,link:null,legend:null,width:null,height:null,padding:0,clusterPadding:75,maxRadius:30,clusters:new Array(2),color:null,diameter:null,tick:function(t){this.link.attr("d",function(t){var e=(t.source.x+t.target.x)/2,n=(t.source.y+t.target.y)/2;return"M"+t.source.x+","+t.source.y+"L"+e+","+n+"L"+t.target.x+","+t.target.y}),this.node.each(this.cluster(.1*t.alpha)).each(this.collide(.5*t.alpha)).attr("transform",function(t){return"translate("+t.x+","+t.y+")"})},update:function(){var t=this;t.link=t.svg.selectAll(".link").data(t.force.links(),function(t){return t.id}),t.link.enter().append("path").attr("class","link").attr("marker-mid","url(#arrow)"),t.link.exit().remove(),t.node=t.svg.selectAll("g.node").data(t.force.nodes(),function(t){return t.id}),t.node.select(".bandwidth-border").attr("stroke",function(e){return d3.rgb(t.color(e.zone)).brighter(2)}).transition().duration(750).attr("stroke-opacity",1).attr("r",function(e){return t.diameter(e.bandwidth)}).transition().delay(750).duration(750).attr("stroke-opacity",0),t.node.select(".bandwidth").transition().duration(1500).attr("r",function(e){return t.diameter(e.bandwidth)}).attr("fill",function(e){return t.color(e.zone)}),t.node.select(".max-bandwidth").classed("stalling",function(t){return t.isStalling}).transition().duration(1500).attr("r",function(e){return t.diameter(e.maxBandwidth)}).attr("fill",function(e){return t.color(e.zone)}).attr("fill",function(e){return e.isStalling?t.desaturate(t.color(e.zone)):t.color(e.zone)});var e=t.node.enter().append("g").attr("class","node").call(t.force.drag);e.append("circle").attr("class","max-bandwidth").attr("r",function(e){return t.diameter(e.maxBandwidth)}).attr("fill",function(e){return t.color(e.zone)}).attr("fill-opacity","0.5"),e.append("circle").attr("class","bandwidth").attr("r",function(e){return t.diameter(e.bandwidth)}).attr("fill",function(e){return t.color(e.zone)}),e.append("circle").attr("class","bandwidth-border").attr("fill-opacity",0).attr("stroke",function(e){return d3.rgb(t.color(e.zone)).brighter(2)}).attr("stroke-opacity",0).attr("r",function(e){return t.diameter(e.bandwidth)}),e.append("text").text(function(t){return t.name}),t.node.exit().remove(),t.legend=t.svg.selectAll(".legend").data(t.zones,function(t){return t.id}),t.legend.select("rect").attr("fill",function(e){return t.color(e.id)}),t.legend.select("text").text(function(t){return t.name});var n=t.legend.enter().append("g").attr("class","legend").attr("transform","translate(20, 70)");n.append("rect").attr("x",20).attr("y",function(t,e){return 24*e}).attr("width",16).attr("height",16).attr("fill",function(e){return t.color(e.id)}),n.append("text").attr("x",44).attr("y",function(t,e){return 24*e+14}).text(function(t){return t.name}),t.legend.exit().remove(),t.force.start();var i=document.querySelectorAll(".node");_(i).forEach(function(t){var e=t.parentNode;e.appendChild(t)})},cluster:function(t){var e=this;return function(n){var i=e.clusters[n.zone];if(i!==n){var a=n.x-i.x,r=n.y-i.y,s=Math.sqrt(a*a+r*r),o=n.maxBandwidth/10+i.maxBandwidth/10;s!=o&&(s=(s-o)/s*t,n.x-=a*=s,n.y-=r*=s,i.x+=a,i.y+=r)}}},collide:function(t){var e=this,n=d3.geom.quadtree(e.nodes);return function(i){var a=i.maxRadius/10+e.maxRadius/10+Math.max(e.padding,e.clusterPadding),r=i.x-a,s=i.x+a,o=i.y-a,d=i.y+a;n.visit(function(n,a,l,h,c){if(n.point&&n.point!==i){var u=i.x-n.point.x,f=i.y-n.point.y,p=Math.sqrt(u*u+f*f),m=i.maxBandwidth/10+n.point.maxBandwidth/10+(i.zone===n.point.zone?e.padding:e.clusterPadding);m>p&&(p=(p-m)/p*t,i.x-e.maxRadius>0&&i.x+e.maxRadius<e.width&&(i.x-=u*=p,n.point.x-e.maxRadius>0&&n.point.x+e.maxRadius<e.width&&(n.point.x+=u)),i.y-e.maxRadius>0&&i.y+e.maxRadius<e.height&&(i.y-=f*=p,n.point.y-e.maxRadius>0&&n.point.y+e.maxRadius<e.height&&(n.point.y+=f)))}return a>s||r>h||l>d||o>c})}},nodesChanged:function(){var t=this,e=_(this.nodes).groupBy("zone").pairs().valueOf();_(e).forEach(function(e){t.clusters[e[0]]=_(e[1]).max("bandwidth").valueOf()}),this.update()}.observes("nodes.[]","nodes.@each.bandwidth","nodes.@each.zone","nodes.@each.isStalling"),linksChanged:function(){var t=this;_(t.nodes).forEach(function(e,n){_(t.links).filter({source:e.id}).forEach(function(t){t.set("source",n)}),_(t.links).filter({target:e.id}).forEach(function(t){t.set("target",n)})}),this.update()}.observes("links.[]","links.@each.source","links.@each.target"),desaturate:function(t){var e=d3.hsl(t);return e.s=.35,e},resizeGraph:function(){this.width=n.$(n.$("#network-graph").parents(":not(.ember-view)")[0]).width(),this.height=n.$(n.$("#network-graph").parents(":not(.ember-view)")[0]).height(),this.force.size([this.width,this.height]),this.svg.attr("width",this.width),this.svg.attr("height",this.height)},didInsertElement:function(){window.onresize=this.resizeGraph.bind(this),n.run.later(this,function(){this.width=n.$(n.$("#network-graph").parents(":not(.ember-view)")[0]).width(),this.height=n.$(n.$("#network-graph").parents(":not(.ember-view)")[0]).height(),console.log(this.width),console.log(this.height),this.color=d3.scale.category10().domain(["z_1","z_2"]),this.diameter=d3.scale.linear().domain([0,500]).range([0,this.maxRadius]),this.force=d3.layout.force().nodes(this.nodes).links(this.links).gravity(.05).linkDistance(150).charge(-400).friction(.8).size([this.width,this.height]).on("tick",this.tick.bind(this)),this.svg=d3.select("#network-graph").append("svg").attr("width",this.width).attr("height",this.height),this.svg.append("defs").selectAll("marker").data(["arrow"]).enter().append("marker").attr("id",function(t){return t}).attr("viewBox","0 -5 10 10").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5"),this.svg.append("g").attr("width",100).attr("height",100).attr("class","legendHeading").attr("transform","translate(40, 50)").append("text").text("Zones"),this.node=this.svg.selectAll(".node"),this.link=this.svg.selectAll(".link"),this.legend=this.svg.selectAll(".legend"),this.nodesChanged(),this.linksChanged(),this.update()}.bind(this),250)}})}),define("ember-vizkit/components/sparkline-chart",["ember","exports"],function(t,e){"use strict";var n=t["default"];e["default"]=n.Component.extend({values:[],valuesString:function(){return _(this.values).last(20).join(",")}.property("values.[]"),valuesChanged:function(){n.run.schedule("afterRender",function(){this.$("#peity-values").change()}.bind(this))}.observes("valuesString"),didInsertElement:function(){this.$("#peity-values").peity("line",{width:100,fill:"none"})}})}),define("ember-vizkit/controllers/index",["ember","exports"],function(t,e){"use strict";var n=t["default"];e["default"]=n.Controller.extend({nodes:[],links:[],zones:[],init:function(){this.socket=io.connect("http://demonstrator.herokuapp.com:80"),this.socket.on("links",this.updateLinks.bind(this)),this.socket.on("node_update",this.updatesNodes.bind(this))},nodesForLineChart:function(){var t=[];return this.nodes.forEach(function(e){var n=[];n.pushObject(e.get("name")),n.pushObjects(e.get("bandwidthHistory")),t.pushObject(n)}),t}.property("nodes.@each.bandwidth"),updatesNodes:function(t){t.forEach(function(t){var e=this.nodes.findBy("id",t.id);e?(e.setProperties({name:t.name||e.name,zone:t.zone||e.zone,bandwidth:t.bandwidth||e.bandwidth,maxBandwidth:t.maxBandwidth||e.maxBandwidth}),void 0!==t.bandwidth&&e.bandwidthHistory.pushObject(t.bandwidth),void 0!==t.isStalling&&e.set("isStalling",t.isStalling)):this.nodes.pushObject(n.Object.create(t))}.bind(this))},updateLinks:function(t){t.forEach(function(t){var e=this.links.findBy("id",t.id);e?e.setProperties({source:t.source,target:t.target}):this.links.pushObject(n.Object.create(t))}.bind(this));for(var e=0;e<this.links.length;e++){var i=this.links[e];_(t).find({id:i.id})||this.links.removeObject(i)}},nodesChanged:function(){}.observes("nodes.[]"),linksChanged:function(){}.observes("links.[]","links.@each.source","links.@each.target")})}),define("ember-vizkit/router",["ember","exports"],function(t,e){"use strict";var n=t["default"],i=n.Router.extend({location:EmberVIZKITENV.locationType});i.map(function(){}),e["default"]=i}),define("ember-vizkit/routes/index",["ember","exports"],function(t,e){"use strict";var n=t["default"];e["default"]=n.Route.extend({model:function(){var t="http://demonstrator.herokuapp.com/";return new n.RSVP.hash({nodes:n.$.ajax({url:t+"nodes",dataType:"json",type:"GET"}),links:n.$.ajax({url:t+"links",dataType:"json",type:"GET"}),zones:n.$.ajax({url:t+"zones",dataType:"json",type:"GET"})})},setupController:function(t,e){var i=[];e.nodes.forEach(function(t){t.bandwidthHistory=[0],i.pushObject(n.Object.create(t))});var a=[];e.links.forEach(function(t){a.pushObject(n.Object.create(t))});var r=[];e.zones.forEach(function(t){r.pushObject(n.Object.create(t))}),t.set("nodes",i),t.set("links",a),t.set("zones",r)}})}),define("ember-vizkit/templates/components/line-chart",["ember","exports"],function(t,e){"use strict";var n=t["default"];e["default"]=n.Handlebars.template(function(t,e,i,a,r){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,n.Handlebars.helpers),r=r||{},r.buffer.push('<div id="line-chart"></div>\r\n')})}),define("ember-vizkit/templates/components/network-graph",["ember","exports"],function(t,e){"use strict";var n=t["default"];e["default"]=n.Handlebars.template(function(t,e,i,a,r){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,n.Handlebars.helpers),r=r||{},r.buffer.push('<div id="network-graph"></div>\r\n')})}),define("ember-vizkit/templates/components/sparkline-chart",["ember","exports"],function(t,e){"use strict";var n=t["default"];e["default"]=n.Handlebars.template(function(t,e,i,a,r){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,n.Handlebars.helpers),r=r||{};var s,o="";return r.buffer.push('<span id="peity-values">'),s=i._triageMustache.call(e,"valuesString",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:r}),(s||0===s)&&r.buffer.push(s),r.buffer.push("</span>\r\n"),o})}),define("ember-vizkit/templates/index",["ember","exports"],function(t,e){"use strict";var n=t["default"];e["default"]=n.Handlebars.template(function(t,e,i,a,r){function s(t,e){var n,a,r,s="";return e.buffer.push('\n            <div class="menu-item">\n                <div horizontal layout flex center>\n                    '),e.buffer.push(u((a=i.input||t&&t.input,r={hash:{type:"checkbox",checked:"isStalling"},hashTypes:{type:"STRING",checked:"ID"},hashContexts:{type:t,checked:t},contexts:[],types:[],data:e},a?a.call(t,r):c.call(t,"input",r)))),e.buffer.push("\n                    <h4 "),e.buffer.push(u(i["bind-attr"].call(t,{hash:{"class":"isStalling"},hashTypes:{"class":"STRING"},hashContexts:{"class":t},contexts:[],types:[],data:e}))),e.buffer.push(" flex>"),n=i._triageMustache.call(t,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:e}),(n||0===n)&&e.buffer.push(n),e.buffer.push("</h4>\n                    "),e.buffer.push(u((a=i["sparkline-chart"]||t&&t["sparkline-chart"],r={hash:{values:"bandwidthHistory"},hashTypes:{values:"ID"},hashContexts:{values:t},contexts:[],types:[],data:e},a?a.call(t,r):c.call(t,"sparkline-chart",r)))),e.buffer.push("\n                </div>\n            </div>\n            "),s}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,n.Handlebars.helpers),r=r||{};var o,d,l,h="",c=i.helperMissing,u=this.escapeExpression,f=this;return r.buffer.push('<div class="toolbar" horizontal layout center>\n    <i class="fa fa-share-alt fa-inverse fa-2x"></i>\n    <h2>Network Visualization Toolkit</h2>\n</div>\n<div class="main" vertical layout>\n    <div horizontal layout>\n        <div class="sidebar" vertical layout>\n            '),o=i.each.call(e,"nodes",{hash:{},hashTypes:{},hashContexts:{},inverse:f.noop,fn:f.program(1,s,r),contexts:[e],types:["ID"],data:r}),(o||0===o)&&r.buffer.push(o),r.buffer.push('\n        </div>\n        <div class="content" vertical layout flex>\n            <div class="card" flex two>\n                '),r.buffer.push(u((d=i["network-graph"]||e&&e["network-graph"],l={hash:{nodes:"nodes",links:"links",zones:"zones"},hashTypes:{nodes:"ID",links:"ID",zones:"ID"},hashContexts:{nodes:e,links:e,zones:e},contexts:[],types:[],data:r},d?d.call(e,l):c.call(e,"network-graph",l)))),r.buffer.push('\n            </div>\n            <br>\n            <div class="card" flex>\n                '),r.buffer.push(u((d=i["line-chart"]||e&&e["line-chart"],l={hash:{data:"nodesForLineChart"},hashTypes:{data:"ID"},hashContexts:{data:e},contexts:[],types:[],data:r},d?d.call(e,l):c.call(e,"line-chart",l)))),r.buffer.push("\n            </div>\n        </div>\n    </div>\n</div>\n"),h})});