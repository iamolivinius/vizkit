define("ember-vizkit/app",["ember","ember/resolver","ember/load-initializers","exports"],function(t,e,n,a){"use strict";var r=t["default"],i=e["default"],s=n["default"];r.MODEL_FACTORY_INJECTIONS=!0;var o=r.Application.extend({modulePrefix:"ember-vizkit",Resolver:i});s(o,"ember-vizkit"),a["default"]=o}),define("ember-vizkit/components/line-chart",["ember","exports"],function(t,e){"use strict";var n=t["default"];e["default"]=n.Component.extend({chart:null,data:[],dataChanged:function(){this.chart.load({columns:this.data})}.observes("data.[]"),didInsertElement:function(){n.run.later(this,function(){this.chart=c3.generate({bindto:"#line-chart",data:{columns:this.data,type:"spline"},legend:{position:"right"},axis:{x:{label:{text:"Nodes",position:"inner-right"}},y:{label:{text:"Bandwidth",position:"outer-middle"}}},grid:{x:{show:!1},y:{show:!0}},subchart:{show:!0},zoom:{enabled:!0}})},250)}})}),define("ember-vizkit/components/network-graph",["ember","exports"],function(t,e){"use strict";var n=t["default"];e["default"]=n.Component.extend({nodes:[],links:[],zones:[],force:null,svg:null,node:null,link:null,legend:null,width:null,height:null,padding:0,clusterPadding:75,maxRadius:30,clusters:new Array(2),color:null,diameter:null,tick:function(t){this.link.attr("d",function(t){var e=(t.source.x+t.target.x)/2,n=(t.source.y+t.target.y)/2;return"M"+t.source.x+","+t.source.y+"L"+e+","+n+"L"+t.target.x+","+t.target.y}),this.node.each(this.cluster(.1*t.alpha)).each(this.collide(.5*t.alpha)).attr("transform",function(t){return"translate("+t.x+","+t.y+")"})},update:function(){var t=this;t.link=t.svg.selectAll(".link").data(t.force.links(),function(t){return t.id}),t.link.enter().append("path").attr("class","link").attr("marker-mid","url(#arrow)"),t.link.exit().remove(),t.node=t.svg.selectAll("g.node").data(t.force.nodes(),function(t){return t.id}),t.node.select(".bandwidth-border").attr("stroke",function(e){return d3.rgb(t.color(e.zone)).brighter(2)}).transition().duration(750).attr("stroke-opacity",1).attr("r",function(e){return t.diameter(e.bandwidth)}).transition().delay(750).duration(750).attr("stroke-opacity",0),t.node.select(".bandwidth").transition().duration(1500).attr("r",function(e){return t.diameter(e.bandwidth)}).attr("fill",function(e){return t.color(e.zone)}),t.node.select(".max-bandwidth").classed("stalling",function(t){return t.isStalling}).transition().duration(1500).attr("r",function(e){return t.diameter(e.maxBandwidth)}).attr("fill",function(e){return t.color(e.zone)}).attr("fill",function(e){return e.isStalling?t.desaturate(t.color(e.zone)):t.color(e.zone)});var e=t.node.enter().append("g").attr("class","node").call(t.force.drag);e.append("circle").attr("class","max-bandwidth").attr("r",function(e){return t.diameter(e.maxBandwidth)}).attr("fill",function(e){return t.color(e.zone)}).attr("fill-opacity","0.5"),e.append("circle").attr("class","bandwidth").attr("r",function(e){return t.diameter(e.bandwidth)}).attr("fill",function(e){return t.color(e.zone)}),e.append("circle").attr("class","bandwidth-border").attr("fill-opacity",0).attr("stroke",function(e){return d3.rgb(t.color(e.zone)).brighter(2)}).attr("stroke-opacity",0).attr("r",function(e){return t.diameter(e.bandwidth)}),e.append("text").text(function(t){return t.name}),t.node.exit().remove(),t.legend=t.svg.selectAll(".legend").data(t.zones,function(t){return t.id}),t.legend.select("rect").attr("fill",function(e){return t.color(e.id)}),t.legend.select("text").text(function(t){return t.name});var n=t.legend.enter().append("g").attr("class","legend").attr("transform","translate(20, 70)");n.append("rect").attr("x",20).attr("y",function(t,e){return 24*e}).attr("width",16).attr("height",16).attr("fill",function(e){return t.color(e.id)}),n.append("text").attr("x",44).attr("y",function(t,e){return 24*e+14}).text(function(t){return t.name}),t.legend.exit().remove(),t.force.start();var a=document.querySelectorAll(".node");_(a).forEach(function(t){var e=t.parentNode;e.appendChild(t)})},cluster:function(t){var e=this;return function(n){var a=e.clusters[n.zone];if(a!==n){var r=n.x-a.x,i=n.y-a.y,s=Math.sqrt(r*r+i*i),o=n.maxBandwidth/10+a.maxBandwidth/10;s!=o&&(s=(s-o)/s*t,n.x-=r*=s,n.y-=i*=s,a.x+=r,a.y+=i)}}},collide:function(t){var e=this,n=d3.geom.quadtree(e.nodes);return function(a){var r=a.maxRadius/10+e.maxRadius/10+Math.max(e.padding,e.clusterPadding),i=a.x-r,s=a.x+r,o=a.y-r,d=a.y+r;n.visit(function(n,r,l,h,u){if(n.point&&n.point!==a){var c=a.x-n.point.x,p=a.y-n.point.y,f=Math.sqrt(c*c+p*p),b=a.maxBandwidth/10+n.point.maxBandwidth/10+(a.zone===n.point.zone?e.padding:e.clusterPadding);b>f&&(f=(f-b)/f*t,a.x-e.maxRadius>0&&a.x+e.maxRadius<e.width&&(a.x-=c*=f,n.point.x-e.maxRadius>0&&n.point.x+e.maxRadius<e.width&&(n.point.x+=c)),a.y-e.maxRadius>0&&a.y+e.maxRadius<e.height&&(a.y-=p*=f,n.point.y-e.maxRadius>0&&n.point.y+e.maxRadius<e.height&&(n.point.y+=p)))}return r>s||i>h||l>d||o>u})}},nodesChanged:function(){var t=this,e=_(this.nodes).groupBy("zone").pairs().valueOf();_(e).forEach(function(e){t.clusters[e[0]]=_(e[1]).max("bandwidth").valueOf()}),this.update()}.observes("nodes.[]","nodes.@each.bandwidth","nodes.@each.zone","nodes.@each.isStalling"),linksChanged:function(){var t=this;_(t.nodes).forEach(function(e,n){_(t.links).filter({source:e.id}).forEach(function(t){t.set("source",n)}),_(t.links).filter({target:e.id}).forEach(function(t){t.set("target",n)})}),this.update()}.observes("links.[]","links.@each.source","links.@each.target"),desaturate:function(t){var e=d3.hsl(t);return e.s=.35,e},resizeGraph:function(){this.width=n.$(n.$("#network-graph").parents(":not(.ember-view)")[0]).width(),this.height=n.$(n.$("#network-graph").parents(":not(.ember-view)")[0]).height(),this.force.size([this.width,this.height]),this.svg.attr("width",this.width),this.svg.attr("height",this.height)},didInsertElement:function(){window.onresize=this.resizeGraph.bind(this),n.run.later(this,function(){this.width=n.$(n.$("#network-graph").parents(":not(.ember-view)")[0]).width(),this.height=n.$(n.$("#network-graph").parents(":not(.ember-view)")[0]).height(),console.log(this.width),console.log(this.height),this.color=d3.scale.category10().domain(["z_1","z_2"]),this.diameter=d3.scale.linear().domain([0,500]).range([0,this.maxRadius]),this.force=d3.layout.force().nodes(this.nodes).links(this.links).gravity(.05).linkDistance(150).charge(-400).friction(.8).size([this.width,this.height]).on("tick",this.tick.bind(this)),this.svg=d3.select("#network-graph").append("svg").attr("width",this.width).attr("height",this.height),this.svg.append("defs").selectAll("marker").data(["arrow"]).enter().append("marker").attr("id",function(t){return t}).attr("viewBox","0 -5 10 10").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5"),this.svg.append("g").attr("width",100).attr("height",100).attr("class","legendHeading").attr("transform","translate(40, 50)").append("text").text("Zones"),this.node=this.svg.selectAll(".node"),this.link=this.svg.selectAll(".link"),this.legend=this.svg.selectAll(".legend"),this.nodesChanged(),this.linksChanged(),this.update()}.bind(this),250)}})}),define("ember-vizkit/components/sparkline-chart",["ember","exports"],function(t,e){"use strict";var n=t["default"];e["default"]=n.Component.extend({values:[],valuesString:function(){return _(this.values).last(20).join(",")}.property("values.[]"),valuesChanged:function(){n.run.schedule("afterRender",function(){this.$("#peity-values").change()}.bind(this))}.observes("valuesString"),didInsertElement:function(){this.$("#peity-values").peity("line",{width:100,fill:"none"})}})}),define("ember-vizkit/controllers/index",["ember","exports"],function(t,e){"use strict";var n=t["default"];e["default"]=n.Controller.extend({nodes:[],links:[],zones:[],pause:!1,init:function(){this.socket=io.connect("http://demonstrator.herokuapp.com:80"),this.socket.on("links",this.updateLinks.bind(this)),this.socket.on("node_update",this.updatesNodes.bind(this)),n.$(document).on("recognised",function(){n.$("paper-dialog").get(0).toggle()})},actions:{pause:function(){this.set("pause",!this.get("pause"))}},nodesForLineChart:function(){var t=[];return this.nodes.forEach(function(e){var n=[];n.pushObject(e.get("name")),n.pushObjects(e.get("bandwidthHistory")),t.pushObject(n)}),t}.property("nodes.@each.bandwidth"),updatesNodes:function(t){this.get("pause")||t.forEach(function(t){var e=this.nodes.findBy("id",t.id);e?(e.setProperties({name:t.name||e.name,zone:t.zone||e.zone,bandwidth:t.bandwidth||e.bandwidth,maxBandwidth:t.maxBandwidth||e.maxBandwidth}),void 0!==t.bandwidth&&e.bandwidthHistory.pushObject(t.bandwidth),void 0!==t.isStalling&&e.set("isStalling",t.isStalling)):this.nodes.pushObject(n.Object.create(t))}.bind(this))},updateLinks:function(t){if(!this.get("pause")){t.forEach(function(t){var e=this.links.findBy("id",t.id);e?e.setProperties({source:t.source,target:t.target}):this.links.pushObject(n.Object.create(t))}.bind(this));for(var e=0;e<this.links.length;e++){var a=this.links[e];_(t).find({id:a.id})||this.links.removeObject(a)}}},nodesChanged:function(){}.observes("nodes.[]"),linksChanged:function(){}.observes("links.[]","links.@each.source","links.@each.target")})}),define("ember-vizkit/router",["ember","exports"],function(t,e){"use strict";var n=t["default"],a=n.Router.extend({location:EmberVIZKITENV.locationType});a.map(function(){}),e["default"]=a}),define("ember-vizkit/routes/index",["ember","exports"],function(t,e){"use strict";var n=t["default"];e["default"]=n.Route.extend({model:function(){var t="http://demonstrator.herokuapp.com/";return new n.RSVP.hash({nodes:n.$.ajax({url:t+"nodes",dataType:"json",type:"GET"}),links:n.$.ajax({url:t+"links",dataType:"json",type:"GET"}),zones:n.$.ajax({url:t+"zones",dataType:"json",type:"GET"})})},setupController:function(t,e){var a=[];e.nodes.forEach(function(t){t.bandwidthHistory=[0],a.pushObject(n.Object.create(t))});var r=[];e.links.forEach(function(t){r.pushObject(n.Object.create(t))});var i=[];e.zones.forEach(function(t){i.pushObject(n.Object.create(t))}),t.set("nodes",a),t.set("links",r),t.set("zones",i)}})}),define("ember-vizkit/templates/components/line-chart",["ember","exports"],function(t,e){"use strict";var n=t["default"];e["default"]=n.Handlebars.template(function(t,e,a,r,i){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,n.Handlebars.helpers),i=i||{},i.buffer.push('<div id="line-chart"></div>\r\n')})}),define("ember-vizkit/templates/components/network-graph",["ember","exports"],function(t,e){"use strict";var n=t["default"];e["default"]=n.Handlebars.template(function(t,e,a,r,i){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,n.Handlebars.helpers),i=i||{},i.buffer.push('<div id="network-graph"></div>\r\n')})}),define("ember-vizkit/templates/components/sparkline-chart",["ember","exports"],function(t,e){"use strict";var n=t["default"];e["default"]=n.Handlebars.template(function(t,e,a,r,i){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,n.Handlebars.helpers),i=i||{};var s,o="";return i.buffer.push('<span id="peity-values">'),s=a._triageMustache.call(e,"valuesString",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:i}),(s||0===s)&&i.buffer.push(s),i.buffer.push("</span>\r\n"),o})}),define("ember-vizkit/templates/index",["ember","exports"],function(t,e){"use strict";var n=t["default"];e["default"]=n.Handlebars.template(function(t,e,a,r,i){function s(t,e){e.buffer.push('\r\n            <i class="fa fa-play"></i> Play\r\n            ')}function o(t,e){e.buffer.push('\r\n            <i class="fa fa-pause"></i> Pause\r\n            ')}function d(t,e){var n,r,i,s="";return e.buffer.push('\r\n            <div class="menu-item">\r\n                <div horizontal layout flex center>\r\n                    '),e.buffer.push(f((r=a.input||t&&t.input,i={hash:{type:"checkbox",checked:"isStalling"},hashTypes:{type:"STRING",checked:"ID"},hashContexts:{type:t,checked:t},contexts:[],types:[],data:e},r?r.call(t,i):p.call(t,"input",i)))),e.buffer.push("\r\n                    <h4 "),e.buffer.push(f(a["bind-attr"].call(t,{hash:{"class":"isStalling"},hashTypes:{"class":"STRING"},hashContexts:{"class":t},contexts:[],types:[],data:e}))),e.buffer.push(" flex>"),n=a._triageMustache.call(t,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:e}),(n||0===n)&&e.buffer.push(n),e.buffer.push("</h4>\r\n                    "),e.buffer.push(f((r=a["sparkline-chart"]||t&&t["sparkline-chart"],i={hash:{values:"bandwidthHistory"},hashTypes:{values:"ID"},hashContexts:{values:t},contexts:[],types:[],data:e},r?r.call(t,i):p.call(t,"sparkline-chart",i)))),e.buffer.push("\r\n                </div>\r\n            </div>\r\n            "),s}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,n.Handlebars.helpers),i=i||{};var l,h,u,c="",p=a.helperMissing,f=this.escapeExpression,b=this;return i.buffer.push('<div class="toolbar" horizontal layout center>\r\n    <i class="fa fa-share-alt fa-inverse fa-2x"></i>\r\n    <h2>Network Visualization Toolkit</h2>\r\n</div>\r\n<div class="main" vertical layout>\r\n    <div horizontal layout>\r\n        <div class="sidebar" vertical layout>\r\n            <button class="pure-button" '),i.buffer.push(f(a.action.call(e,"pause",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:i}))),i.buffer.push(">\r\n            "),l=a["if"].call(e,"pause",{hash:{},hashTypes:{},hashContexts:{},inverse:b.program(3,o,i),fn:b.program(1,s,i),contexts:[e],types:["ID"],data:i}),(l||0===l)&&i.buffer.push(l),i.buffer.push("\r\n            </button>\r\n            "),l=a.each.call(e,"nodes",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(5,d,i),contexts:[e],types:["ID"],data:i}),(l||0===l)&&i.buffer.push(l),i.buffer.push('\r\n        </div>\r\n        <div class="content" vertical layout flex>\r\n            <div class="card" flex two>\r\n                '),i.buffer.push(f((h=a["network-graph"]||e&&e["network-graph"],u={hash:{nodes:"nodes",links:"links",zones:"zones"},hashTypes:{nodes:"ID",links:"ID",zones:"ID"},hashContexts:{nodes:e,links:e,zones:e},contexts:[],types:[],data:i},h?h.call(e,u):p.call(e,"network-graph",u)))),i.buffer.push('\r\n            </div>\r\n            <br>\r\n            <div class="card" flex>\r\n                '),i.buffer.push(f((h=a["line-chart"]||e&&e["line-chart"],u={hash:{data:"nodesForLineChart"},hashTypes:{data:"ID"},hashContexts:{data:e},contexts:[],types:[],data:i},h?h.call(e,u):p.call(e,"line-chart",u)))),i.buffer.push('\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<cheat-code></cheat-code>\r\n\r\n<paper-dialog heading="Credits" center>\r\n    <p>Made with love by: </p>\r\n    <polymer-github-card user="iamolivinius"></polymer-github-card>\r\n    <paper-button label="Close" affirmative autofocus></paper-button>\r\n</paper-dialog>\r\n'),c})});